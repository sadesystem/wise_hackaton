<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./vars.css">
  <link rel="stylesheet" href="./style.css">
  <title>Goal Jar Tree View</title>
  <style>
    a, button, input, select, h1, h2, h3, h4, h5, * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      border: none;
      text-decoration: none;
      background: none;
      -webkit-font-smoothing: antialiased;
    }
    menu, ol, ul { list-style-type: none; margin: 0; padding: 0; }
    html, body { height: 100%; margin: 0; }
    body { background: #e5e5e5; }
    .center-shell {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
<div class="center-shell">
  <div class="goal-jar-tree-view">
    <div class="device-device-frame">
      <div class="device-device-frame-components-status-bar">
        <div class="time">9:30</div>
        <img class="right-icons" src="right-icons0.svg" />
        <img class="camera-cutout" src="camera-cutout0.svg" />
      </div>
      <div class="device-device-frame-components-navigation">
        <div class="home"></div>
      </div>
    </div>

    <!-- Leaf image -->
    <img class="image-1" src="leaf_image_1.png" />

    <!-- Chip buttons -->
    <div class="chip-button"><div class="all">+5â‚¬</div></div>
    <div class="chip-button2"><div class="all2">+10â‚¬</div></div>
    <div class="chip-button3"><div class="all2">Custom</div></div>

    <!-- THE GOAL CARD STRUCTURE THAT WAS MISSING -->
    <div class="button">
      <div class="div">
        <div class="div2">
          <div class="div3">
            <div class="div4">ðŸŽ¨</div>
          </div>
          <div class="div5">
            <div class="div6">
              <div class="art-supplies">Loading...</div>
            </div>
            <div class="div7"></div>
          </div>
          <div class="div8">
            <div class="_0">0%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Motivation / primary button -->
    <div class="primary-button">
      <div class="next">Keep going!</div>
    </div>

    <!-- Bottom nav -->
    <div class="bottom-nav-icons">
      <div class="home2">History</div>
    </div>
    <img class="vector" src="history_image.svg" />
    <img class="savings" src="savings_image.svg" />
    <div class="home3">Home</div>
    <div class="savings2">Savings</div>
    <img class="home4" src="home_image.svg" />
  </div>
</div>

<script>
  async function loadGoalDetail() {
    console.log("Script started");

    const urlParams = new URLSearchParams(window.location.search);
    const jarId = parseInt(urlParams.get('id'));

    console.log("Jar ID from URL:", jarId);

    if (!jarId) {
      console.error("No jar ID provided in URL");
      return;
    }

    try {
      const response = await fetch("../data/jars.json");
      const data = await response.json();
      const jar = data.jars.find(j => j.id === jarId);

      if (!jar) {
        console.error("Jar not found with ID:", jarId);
        return;
      }

      const percent = ((jar.current / jar.goal) * 100).toFixed(0);
      const icon = jar.name.includes("art") ? "ðŸŽ¨" : "ðŸš²";

      // Now these elements exist!
      document.querySelector('.div4').textContent = icon;
      document.querySelector('.art-supplies').textContent = jar.name;
      document.querySelector('._0').textContent = `${percent}%`;

      console.log("Successfully updated goal display");

    } catch (error) {
      console.error("Error loading goal:", error);
    }
  }

  loadGoalDetail();
</script>
</body>
</html>