<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savings Goals</title>
    <link rel="stylesheet" href="../assets/css/saving.css">
</head>
<body>
<div class="app-frame">

    <!-- Header -->
    <header class="header">
        <h1>Saving Goals ðŸŽ¯</h1>
    </header>

    <!-- Goal Card 1 -->
    <section class="goal-card">
        <div class="goal-header">
            <div class="goal-icon">ðŸŽ¨</div>
            <div class="goal-info">
                <div class="goal-title">Art Supplies</div>
                <div class="goal-target">Target: 50â‚¬</div>
            </div>
            <div class="goal-progress">0%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" style="width:0%"></div>
        </div>
        <div class="goal-stats">
            <span class="saved">Saved: 0.00â‚¬</span>
            <span class="need">Need: 50.00â‚¬</span>
        </div>
    </section>

    <!-- Goal Card 2 -->
    <section class="goal-card">
        <div class="goal-header">
            <div class="goal-icon">ðŸš²</div>
            <div class="goal-info">
                <div class="goal-title">New Bike</div>
                <div class="goal-target">Target: 150â‚¬</div>
            </div>
            <div class="goal-progress">30%</div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" style="width:30%"></div>
        </div>
        <div class="goal-stats">
            <span class="saved">Saved: 45.50â‚¬</span>
            <span class="need">Need: 104.50â‚¬</span>
        </div>
    </section>

    <!-- Motivation Card -->
    <section class="motivation-card">
        <div class="motivation-icon">ðŸŒŸ</div>
        <h2>Keep saving!</h2>
        <p>Every time you donâ€™t spend, youâ€™re closer to your goals. Youâ€™ve got this! ðŸ’ª</p>
    </section>

    <!-- Bottom Navigation -->
    <!-- navigation bar -->
    <div class="bottom-nav">

        <a href="../html/transactions.html" class="nav-item">
            <img src="../assets/images/vector0.svg" class="nav-icon">
            <div class="nav-label">History</div>
        </a>

        <a href="../html/main.html" class="nav-item">
            <img src="../assets/images/home3.svg" class="nav-icon">
            <div class="nav-label">Home</div>
        </a>

        <a href="../html/saving.html" class="nav-item">
            <img src="../assets/images/savings0.svg" class="nav-icon">
            <div class="nav-label">Savings</div>
        </a>

    </div>

</div>

<script>
    async function loadGoals() {
        const response = await fetch("../data/jars.json");
        const data = await response.json();
        const container = document.querySelector(".app-frame");

        // Remove the existing static goal cards
        document.querySelectorAll(".goal-card").forEach(card => card.remove());

        data.jars.forEach(jar => {
            const percent = ((jar.current / jar.goal) * 100).toFixed(0);
            const need = (jar.goal - jar.current).toFixed(2);

            const card = document.createElement("section");
            card.classList.add("goal-card");
            card.style.cursor = "pointer";

            card.innerHTML = `
            <div class="goal-header">
                <div class="goal-icon">${jar.name.includes("art") ? "ðŸŽ¨" : "ðŸš²"}</div>
                <div class="goal-info">
                    <div class="goal-title">${jar.name}</div>
                    <div class="goal-target">Target: ${jar.goal}â‚¬</div>
                </div>
                <div class="goal-progress">${percent}%</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width:${percent}%"></div>
            </div>
            <div class="goal-stats">
                <span class="saved">Saved: ${jar.current.toFixed(2)}â‚¬</span>
                <span class="need">Need: ${need}â‚¬</span>
            </div>
        `;

            // CLICK â†’ go to goal details page
            card.addEventListener("click", () => {
                window.location.href = `../jar_progress_bar/jar_progress.html?id=${jar.id}`;
            });

            container.insertBefore(card, document.querySelector(".motivation-card"));
        });
    }

    loadGoals();
</script>
</body>
</html>
